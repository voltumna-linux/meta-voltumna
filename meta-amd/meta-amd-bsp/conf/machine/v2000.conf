#@TYPE: Machine
#@NAME: v2000

#@DESCRIPTION: Machine configuration for Siena systems

require conf/machine/include/tune-zen2.inc
require conf/machine/include/uart.inc

MACHINE_EXTRA_RRECOMMENDS += "git gdb make cmake gcc g++ vim libkcapi libtool util-linux"
 
# Include common configuration

PREFERRED_VERSION_linux-yocto = "6.6.26"

MACHINE_EXTRA_RRECOMMENDS += "git gdb make cmake gcc g++ vim libkcapi libtool util-linux libvirt elfutils usbredir libxext pavucontrol libaio iscsi-initiator-utils usbredir spice-protocol spice pixman libxslt virt-viewer qemu kvmtool libtool libkcapi dmidecode stressapptest spidev-test"

KERNEL_MODULE_AUTOLOAD += "nvmem_core nvme nvme-common nvmem cxl cxl_mem cxl_port cxl_core spi-amd ntb_netdev spi-amd pci-cxl cxl_acpi cxl_pmem cxl_pci spi"

PACKAGE_CLASSES ?= "package_rpm"
MACHINE_EXTRA_RRECOMMENDS += "mesa libegl-mesa libegl-mesa-dev  libosmesa libosmesa-dev  libgl-mesa libgl-mesa-dev  libglx-mesa libglx-mesa-dev libglapi libglapi-dev  libgbm libgbm-dev  libgles1-mesa libgles1-mesa-dev  libgles2-mesa libgles2-mesa-dev libgles3-mesa libgles3-mesa-dev libopencl-mesa libopencl-mesa-dev libxatracker libxatracker-dev  mesa-megadriver mesa-vulkan-drivers mesa-vdpau-drivers mesa-tools"

IMAGE_INSTALL:append = " glmark2  mesa-demos linux-firmware kernel-modules"

MACHINE_ESSENTIAL_EXTRA_RRECOMMENDS += "kernel-modules"
KERNEL_MODULE_AUTOLOAD += "spi-amd"

include conf/machine/common.conf

XSERVER = "xserver-xorg \
         xf86-video-amdgpu \
         xf86-video-modesetting \
         xf86-video-fbdev \
         xf86-video-vesa \
         xf86-video-ati \
         xf86-video-intel \
         xf86-video-nouveau \
         xf86-video-vmware \
         "
