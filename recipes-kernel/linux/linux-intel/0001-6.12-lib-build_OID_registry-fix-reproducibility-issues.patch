From 4881d0f985aab70c685bd63b56a2d6ad5e790abc Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@gmail.com>
Date: Sun, 10 Jul 2022 22:56:53 -0400
Subject: [PATCH] lib/build_OID_registry: fix reproducibility issues

The script build_OID_registry captures the full path of itself
in the generated data. This causes reproduciblity issues as the
path is captured and packaged.

We use the basename of the script instead, and that allows us
to be reprodicible, with slightly less information captured in
the output data (but the generating script can still easily
be found).

Signed-off-by: Bruce Ashfield <bruce.ashfield@gmail.com>
Upstream-Status: Inappropriate

Taken from linux-yocto, v5.15/standard/base.

Signed-off-by: Anuj Mittal <anuj.mittal@intel.com>
---
 lib/build_OID_registry | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/lib/build_OID_registry b/lib/build_OID_registry
index 8267e8d71338..755dd33a8b04 100755
--- a/lib/build_OID_registry
+++ b/lib/build_OID_registry
@@ -9,6 +9,7 @@
 
 use strict;
 use Cwd qw(abs_path);
+use File::Basename;
 
 my @names = ();
 my @oids = ();
@@ -40,7 +41,7 @@ open C_FILE, ">$ARGV[1]" or die;
 print C_FILE "/*\n";
 my $scriptname = $0;
 $scriptname =~ s#^\Q$abs_srctree/\E##;
-print C_FILE " * Automatically generated by ", $scriptname, ".  Do not edit\n";
+print C_FILE " * Automatically generated by ", basename $0, ".  Do not edit\n";
 print C_FILE " */\n";
 
 #
-- 
2.34.1

