From 3d547c043f772fe1352c7beb0e3331e35c77e63e Mon Sep 17 00:00:00 2001
From: Pablo Saavedra <psaavedra@igalia.com>
Date: Mon, 11 Nov 2024 13:05:15 +0100
Subject: [PATCH] meson: Check for libunwind instead of libunwind-generic

This helps it to use llvm unwinder since libunwind-generic is specific
to nongnu libunwind.

Upstream-Status: Submitted [https://gitlab.gnome.org/GNOME/sysprof/-/merge_requests/95]

Original-by: Khem Raj <raj.khem@gmail.com>
Modified-by: Pablo Saavedra <psaavedra@igalia.com>

Signed-off-by: Khem Raj <raj.khem@gmail.com>
Signed-off-by: Pablo Saavedra <psaavedra@igalia.com>
---
 meson.build | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/meson.build b/meson.build
index 3907354..783f558 100644
--- a/meson.build
+++ b/meson.build
@@ -114,7 +114,7 @@ if cc.has_header('asm/perf_regs.h')
 endif
 
 if need_libsysprof
-  libunwind_dep = dependency('libunwind-generic', required: true)
+  libunwind_dep = dependency('libunwind', required: true)
   config_h.set('ENABLE_LIBUNWIND', libunwind_dep.found())
   config_h.set('HAVE_UNW_SET_CACHE_SIZE',
                cc.has_header_symbol('libunwind.h',
